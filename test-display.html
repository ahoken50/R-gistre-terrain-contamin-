<!DOCTYPE html>
<html>
<head>
    <title>Test Affichage Données</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
    <h1>Test Affichage Données Gouvernementales</h1>
    
    <div id="stats" class="alert alert-info">
        <strong>Nombre d'enregistrements :</strong> <span id="count">Chargement...</span>
    </div>
    
    <table class="table table-striped" id="test-table">
        <thead class="table-dark">
            <tr>
                <th>Référence</th>
                <th>Adresse</th>
                <th>Code postal</th>
                <th>MRC / Région</th>
                <th>Milieu récepteur</th>
                <th>Nb fiches</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    
    <script type="module">
        async function loadAndDisplay() {
            try {
                const response = await fetch('/data/government-data.json');
                const jsonData = await response.json();
                const data = jsonData.data || jsonData;
                
                document.getElementById('count').textContent = data.length;
                
                const tbody = document.querySelector('#test-table tbody');
                
                data.slice(0, 10).forEach(item => {
                    const row = document.createElement('tr');
                    
                    const columns = [
                        item.NO_MEF_LIEU || '',
                        item.ADR_CIV_LIEU || '',
                        item.CODE_POST_LIEU || '',
                        item.LST_MRC_REG_ADM || '',
                        item.DESC_MILIEU_RECEPT || '',
                        item.NB_FICHES || ''
                    ];
                    
                    columns.forEach(value => {
                        const cell = document.createElement('td');
                        cell.textContent = value;
                        row.appendChild(cell);
                    });
                    
                    tbody.appendChild(row);
                });
                
                console.log('✅ Données chargées:', data.length, 'enregistrements');
                console.log('Premier enregistrement:', data[0]);
            } catch (error) {
                console.error('❌ Erreur:', error);
                document.getElementById('count').textContent = 'ERREUR: ' + error.message;
            }
        }
        
        loadAndDisplay();
    </script>
</body>
</html>
